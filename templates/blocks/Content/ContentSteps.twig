{% import 'macro/el.twig' as el %}
{# Determine alignment (Gutenberg passes this via block.align) #}
{% set align = block.align ?? '' %}
{# Generate unique ID for this slider instance #}
{% set slider_id = 'carousel-team-' ~ random() %}

{# Base wrapper classes #}
{% set wrapper_classes = [
    className,
    block.className,
    'text-center',
    'relative',
    '-mb-8'
]|join(' ')|trim %}

<section
	{% if fields.block_id %} id="{{ fields.block_id|replace(' ', '-') }}" {% endif %} class="{{ wrapper_classes }}">
	{# Only wrap inner content in container when NOT full width #}
	{% set inner_classes = [] %}
	{% set bg_color = block.backgroundColor|default('transparent') %}
	{% if align != 'full' %}
		{% set inner_classes = inner_classes|merge([
			'container', 
			'mx-auto',
			'text-' ~ (block.textColor|default('white'))
			]) %}
  {% endif %}


		<div class="{{ inner_classes|join(' ') }} pb-52 text-{{ block.textColor|default('white')}} bg-{{ bg_color }}">


			{% if fields.title %}
				{{ el.heading({ 
            field: fields.title, 
            block: block,
            colors: color,
            classes: 'titles__main text-6xl font-bold pt-12',
            removeHeadingClass: true
          }) 
        }}
			{% endif %}

			{% if fields.steps %}
				<div class="wrapper-steps grid {{ fields.grid_columns_desktop|default('lg:grid-cols-3') }} grid-cols-1 gap-8 mt-8">
					{% for step in fields.steps %}
						<div class="wrapper-point cursor-pointer">
              <h3 class=" text-{{ step.step_color|default('pink') }} mb-4 font-oswald font-bold text-[48.66px] leading-[58.88px] tracking-0 uppercase text-center">{{ step.step }}</h3>
              <div class="point group flex flex-col items-center justify-center mx-auto text-center rounded-xl bg-{{ step.background_color|default('purple-dark') }} text-{{ step.text_color|default('white') }} py-12 px-6 rounded">
                <h4 class="pb-24 font-oswald font-bold text-[48.66px] leading-[58.88px] tracking-0 uppercase text-center">
                  {{ step.top_title }}<br><span class="font-oswald font-bold text-[88.66px] leading-[89.54px] text-center uppercase">{{ step.title }}</span>
                </h4>
                {% if step.image %}
                  <img src="{{ step.image.url }}" alt="{{ step.image.alt }}" class="mx-auto my-4 max-h-[182px] overflow-hidden transition-all duration-500 group-hover:opacity-0 group-hover:h-0 group-hover:max-h-0 group-hover:my-0"/>
                {% endif %}
                <p class="text-description font-montserrat font-normal text-[25px] leading-[40px] tracking-0 text-center mt-0 h-0 max-h-0 overflow-hidden opacity-0 -translate-y-2 pointer-events-none transition-all duration-500 group-hover:h-auto group-hover:max-h-full group-hover:mt-4 group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto px-12">{{ step.description }}</p>
              </div>
            </div>
					{% endfor %}
				</div>
			{% endif %}
		</div>
  {% if fields.cta_link %}
		<div class="{{ inner_classes|join(' ') }} relative -top-28 z-30">
			<div class="wrapper-cta flex flex-col items-center justify-center">
				<a href="{{ fields.cta_link.url }}">
					<img src="{{ fields.cta_image.url }}" alt="{{ fields.cta_image.alt }}" title="{{ fields.cta_image.title }}" class="mx-auto"/>
				</a>
			</div>
		</div>
	{% endif %}

	{% if fields.bottom_border_image %}
		<div class="absolute bottom-16 z-10 w-full -mb-8">
			<img src="{{ fields.bottom_border_image.url }}" alt="{{ fields.bottom_border_image.alt }}" class="mx-auto"/>
		</div>
	{% endif %}
</section>
